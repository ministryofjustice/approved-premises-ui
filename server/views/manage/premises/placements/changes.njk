{% from "govuk/components/back-link/macro.njk" import govukBackLink %}

{% from "../../../components/keyDetails/macro.njk" import keyDetails %}
{% from "../../../match/placementRequests/occupancyView/partials/_occupancySummary.njk" import occupancySummary %}
{% from "../../../match/placementRequests/occupancyView/partials/_occupancyCalendar.njk" import occupancyCalendar %}

{% extends "../../../partials/layout.njk" %}

{% set pageTitle = applicationName + " - " + pageHeading %}
{% set mainClasses = "app-container govuk-body" %}

{% block header %}
    {{ super() }}
    {{ keyDetails(PlacementUtils.getKeyDetail(placement)) }}
{% endblock %}

{% block beforeContent %}
    {{ govukBackLink({
        text: "Back",
        href: paths.admin.placementRequests.show({ id: placement.requestForPlacementId })
    }) }}
{% endblock %}


{% block content %}
    {% include "../../../_messages.njk" %}

    <h1 class="govuk-heading-l">{{ pageHeading }}</h1>

    {{ occupancySummary(summary) }}

    <section id="calendar-key">
        <h3 class="govuk-heading-m">Key</h3>

        <ul class="calendar__month govuk-list">
            <li class="calendar__day">
                Available
            </li>
            <li class="calendar__day govuk-tag--yellow">
                Full
            </li>
            <li class="calendar__day govuk-tag--red">
                Overbooked
            </li>
        </ul>
    </section>

    <section id="calendar" aria-describedby="calendar-key">
        {{ occupancyCalendar(calendar) }}
    </section>

{% endblock %}
